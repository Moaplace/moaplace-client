# Smart Commit

변경사항을 분석하여 **기능별로 분리 커밋**합니다. 절대 push하지 않습니다.

## 실행 설정

- **thinking 비활성화:** 이 커맨드 실행 시 extended thinking을 사용하지 않는다
- **확인 없이 즉시 실행:** "Do you want to proceed?" 등 사용자 확인을 묻지 않고 바로 실행한다
- **병렬 실행:** 독립적인 명령은 반드시 병렬로 실행한다
- **완료 후 복원:** 커밋 완료 후 "thinking을 다시 활성화하세요: `/config set --thinking true`" 안내를 출력한다

## 규칙

1. **Co-Authored-By 태그 절대 금지** — 커밋 메시지에 추가하지 않는다
2. **GPG 서명 금지** — `--no-gpg-sign` 등 서명 관련 옵션 사용하지 않는다
3. **절대 push 금지** — `git push` 실행하지 않는다
4. **커밋 메시지 한글** — 본문은 한국어로 작성

## 커밋 메시지 형식

### 이슈 번호 추출

브랜치 이름에서 `#숫자` 패턴으로 이슈 번호를 자동 추출합니다:
- `20260225_#44_프로필_화면_실데이터_연동` → `#44`
- `20260301_#12_로그인_페이지_구현` → `#12`
- `feature/#45-button-fix` → `#45`
- `main` 또는 `#` 없는 브랜치 → 이슈 번호 생략

### 타입 추출

브랜치 이름 prefix 또는 변경 내용으로 판단:
- `feature/`, `feat/` → `feat`
- `fix/`, `bugfix/` → `fix`
- `refactor/` → `refactor`
- `style/` → `style`
- `chore/` → `chore`
- `docs/` → `docs`
- `test/` → `test`
- prefix 없으면 변경 내용으로 판단

### 제목 형식

```
<type> : <한글 설명> #이슈번호
```

**주의:** type은 소문자, 콜론 앞뒤 공백 포함, 이슈번호는 `#` 붙여서 끝에 배치

예시:
```
feat : 로그인 페이지 구현 #12
fix : 버튼 클릭 이벤트 미동작 수정 #45
style : 카드 컴포넌트 radius 조정 #12
refactor : API 호출 로직 공통 훅 추출 #23
```

이슈 번호가 없는 브랜치(main 등)에서는 이슈 번호 생략:
```
style : 카드 컴포넌트 radius 조정
```

### 본문

변경 파일이 3개 이상이거나 여러 영역에 걸친 경우, 간단한 불릿 리스트로 요약:
```
feat : 프로필 화면 구현 #44

- 프로필 카드 컴포넌트 추가
- 배지 목록 API 연동
- 스켈레톤 로딩 적용
```

단일 파일 수정이나 단순 변경은 제목만으로 충분하다.

## 실행 절차

### 1단계: 현황 파악

아래 3개 명령을 **병렬로** 실행:
- `git status` — 변경 파일 목록
- `git diff --stat` — 변경 요약
- `git branch --show-current` — 현재 브랜치 (이슈 번호 추출용)

### 2단계: 변경사항 분류

변경된 파일들을 **기능 단위**로 그룹핑:
- 같은 기능에 속하는 파일들을 하나의 커밋으로 묶기
- 스타일 변경, 기능 추가, 설정 변경 등을 분리
- 린터 포맷팅만 변경된 파일은 해당 기능 커밋에 포함하거나 별도 `Style` 커밋

### 3단계: 커밋 실행

각 그룹별로 순차 실행:
```bash
git add <해당 파일들>
git commit -m "$(cat <<'EOF'
<type> : <한글 설명> #이슈번호
EOF
)"
```

### 4단계: 결과 확인

```bash
git status
git log --oneline -<커밋수>
```

## 출력 형식

```markdown
### 커밋 완료

| # | 커밋 | 메시지 | 파일 수 |
|---|------|--------|--------|
| 1 | abc1234 | feat : 기능 설명 #44 | 3 |
| 2 | def5678 | style : 스타일 설명 #44 | 2 |

**브랜치:** 20260225_#44_프로필_화면_실데이터_연동
**상태:** 워킹 트리 클린, origin 대비 N커밋 ahead
```

## 주의사항

- `.env`, `credentials.json` 등 시크릿 파일은 절대 커밋하지 않는다
- 변경사항이 없으면 "커밋할 변경사항이 없어요"로 종료
- `git add .` 또는 `git add -A` 사용 금지 — 파일을 명시적으로 지정
- 커밋 후 절대 push하지 않는다
